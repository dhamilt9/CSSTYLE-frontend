{"ast":null,"code":"import _defineProperty from \"/Users/flatironschool/Development/code/mod4/mod4-project/CSSTYLE-frontend/csstyle/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/flatironschool/Development/code/mod4/mod4-project/CSSTYLE-frontend/csstyle/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/Users/flatironschool/Development/code/mod4/mod4-project/CSSTYLE-frontend/csstyle/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/flatironschool/Development/code/mod4/mod4-project/CSSTYLE-frontend/csstyle/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/flatironschool/Development/code/mod4/mod4-project/CSSTYLE-frontend/csstyle/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/flatironschool/Development/code/mod4/mod4-project/CSSTYLE-frontend/csstyle/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/flatironschool/Development/code/mod4/mod4-project/CSSTYLE-frontend/csstyle/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/flatironschool/Development/code/mod4/mod4-project/CSSTYLE-frontend/csstyle/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/flatironschool/Development/code/mod4/mod4-project/CSSTYLE-frontend/csstyle/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport Header from './Components/Header';\nimport { Row, Col, Input } from 'react-materialize';\nimport SnippetContainer from './Containers/SnippetContainer';\nimport Login from './Components/Login';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      snippets: [],\n      snippetForm: {\n        name: '',\n        html: '',\n        css: '',\n        user_id: '',\n        tags: ''\n      },\n      authenticated: false,\n      loginToggled: true,\n      loginUsername: {\n        username: '',\n        image: ''\n      },\n      currentuser: null\n    };\n\n    _this.handleSubmit = function (e) {\n      e.persist();\n      e.preventDefault();\n      fetch(\"http://localhost:9000/api/v1/snippets\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\"\n        },\n        body: JSON.stringify(_this.state.snippetForm)\n      }).then(function (r) {\n        return r.json();\n      }).then(function (data) {\n        _this.setState(function (prevState) {\n          return {\n            snippets: [data].concat(_toConsumableArray(prevState.snippets))\n          };\n        }, function () {\n          _this.setState({\n            snippetForm: {\n              name: '',\n              html: '',\n              css: '',\n              user_id: '',\n              tags: ''\n            }\n          }, function () {\n            document.querySelector('.btn.waves-effect.waves-light.btn-flat.modal-action.modal-close').click();\n          });\n        });\n      });\n    };\n\n    _this.toggleLoginForm = function (e) {\n      _this.setState({\n        loginUsername: {\n          username: '',\n          image: ''\n        }\n      }, function () {\n        _this.setState(function (prevState) {\n          return {\n            loginToggled: !prevState.loginToggled\n          };\n        });\n      });\n    };\n\n    _this.handleChange = function (e) {\n      e.persist();\n\n      _this.setState(function (prevState) {\n        return {\n          snippetForm: _objectSpread({}, prevState.snippetForm, _defineProperty({}, e.target.id, e.target.value))\n        };\n      });\n    };\n\n    _this.handleLoginUsername = function (e) {\n      e.persist();\n\n      if (e.target.id === \"username\") {\n        _this.setState(function (prevState) {\n          return {\n            loginUsername: _objectSpread({}, prevState.loginUsername, {\n              username: e.target.value\n            })\n          };\n        });\n      } else if (e.target.id === \"user_image\") {\n        _this.setState(function (prevState) {\n          return {\n            loginUsername: _objectSpread({}, prevState.loginUsername, {\n              image: e.target.value\n            })\n          };\n        });\n      }\n    };\n\n    _this.signIn = function (e) {\n      console.log(\"Signing in\");\n      fetch('http://localhost:9000/api/v1/login', {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": 'application/json',\n          \"Accept\": 'application/json'\n        },\n        body: JSON.stringify({\n          username: _this.state.loginUsername.username\n        })\n      }).then(function (r) {\n        return r.json();\n      }).then(function (r) {\n        _this.setState({\n          authenticated: r.success,\n          currentuser: r.user\n        });\n      });\n    };\n\n    _this.handleRegister = function (e) {\n      fetch('http://localhost:9000/api/v1/users', {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": 'application/json',\n          \"Accept\": 'application/json'\n        },\n        body: JSON.stringify({\n          username: _this.state.loginUsername.username,\n          user_image: _this.state.loginUsername.image\n        })\n      }).then(function (r) {\n        return r.json();\n      }).then(function (r) {\n        _this.setState({\n          authenticated: r.success,\n          currentuser: r.user\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      fetch(\"http://localhost:9000/api/v1/snippets\").then(function (r) {\n        return r.json();\n      }).then(function (data) {\n        _this2.setState({\n          snippets: data\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(Header, {\n        handleRegister: this.handleRegister,\n        signIn: this.signIn,\n        handleLoginUsername: this.handleLoginUsername,\n        loginUsername: this.state.loginUsername,\n        loginToggled: this.state.loginToggled,\n        authenticated: this.state.authenticated,\n        toggleLoginForm: this.toggleLoginForm,\n        snippetForm: this.state.snippetForm,\n        handleChange: this.handleChange,\n        handleSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(Col, {\n        s: 10,\n        offset: 's1',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, this.state.authenticated && React.createElement(SnippetContainer, {\n        snippets: this.state.snippets,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/flatironschool/Development/code/mod4/mod4-project/CSSTYLE-frontend/csstyle/src/App.js"],"names":["React","Component","Header","Row","Col","Input","SnippetContainer","Login","App","state","snippets","snippetForm","name","html","css","user_id","tags","authenticated","loginToggled","loginUsername","username","image","currentuser","handleSubmit","e","persist","preventDefault","fetch","method","headers","Accept","body","JSON","stringify","then","r","json","data","setState","prevState","document","querySelector","click","toggleLoginForm","handleChange","target","id","value","handleLoginUsername","signIn","console","log","success","user","handleRegister","user_image"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport Header from './Components/Header'\nimport {Row, Col, Input} from 'react-materialize'\nimport SnippetContainer from './Containers/SnippetContainer'\nimport Login from './Components/Login'\n\n\nclass App extends Component {\n  state={\n    snippets: [],\n    snippetForm: {\n      name: '',\n      html: '',\n      css: '',\n      user_id: '',\n      tags: ''\n    },\n    authenticated: false,\n    loginToggled: true,\n    loginUsername: {username: '', image: ''},\n    currentuser: null,\n  }\n\n  componentDidMount(){\n    fetch(\"http://localhost:9000/api/v1/snippets\")\n    .then(r=>r.json())\n    .then(data=>{\n      this.setState({\n        snippets: data\n      })\n    })\n  }\n\n  handleSubmit = e => {\n    e.persist()\n    e.preventDefault()\n    fetch(\"http://localhost:9000/api/v1/snippets\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      },\n      body: JSON.stringify(this.state.snippetForm)\n    })\n    .then(r=>r.json())\n    .then(data => {\n      this.setState(prevState=>{\n        return {snippets: [data, ...prevState.snippets]}\n      }, () => {\n        this.setState({\n          snippetForm: {\n            name: '',\n            html: '',\n            css: '',\n            user_id: '',\n            tags: ''\n          }\n        },()=>{document.querySelector('.btn.waves-effect.waves-light.btn-flat.modal-action.modal-close').click()})\n      })\n    })\n\n\n  }\n  toggleLoginForm = e => {\n    this.setState({loginUsername: {username: '', image: ''}},() => {\n      this.setState(prevState => {\n        return {loginToggled: !prevState.loginToggled}\n      })\n    })\n  }\n\n  handleChange = e => {\n    e.persist()\n    this.setState(prevState=>{\n      return {snippetForm: {...prevState.snippetForm, [e.target.id]:e.target.value}}\n    })\n  }\n\n  handleLoginUsername = e => {\n    e.persist()\n    if(e.target.id===\"username\"){\n      this.setState(prevState =>\n        {\n          return {loginUsername: {...prevState.loginUsername, username: e.target.value}}\n        }\n      )\n    }else if(e.target.id===\"user_image\"){\n      this.setState(prevState =>\n        {\n          return {loginUsername: {...prevState.loginUsername, image: e.target.value}}\n        }\n      )\n    }\n  }\n\n  signIn = (e) => {\n    console.log(\"Signing in\")\n    fetch('http://localhost:9000/api/v1/login', {\n      method: 'POST',\n      headers:\n      {\n        \"Content-Type\": 'application/json',\n        \"Accept\": 'application/json'\n      },\n      body: JSON.stringify({\n        username: this.state.loginUsername.username\n      })\n    })\n    .then(r=>r.json())\n    .then(r=> {\n      this.setState({ authenticated: r.success, currentuser: r.user})\n    })\n  }\n\n  handleRegister = (e) => {\n    fetch('http://localhost:9000/api/v1/users', {\n      method: 'POST',\n      headers:\n      {\n        \"Content-Type\": 'application/json',\n        \"Accept\": 'application/json'\n      },\n      body: JSON.stringify({\n        username: this.state.loginUsername.username,\n        user_image: this.state.loginUsername.image\n      })\n    })\n    .then(r=>r.json())\n    .then(r=> {\n        this.setState({ authenticated: r.success, currentuser: r.user})\n      })\n    }\n\n  render() {\n\n    return (\n      <div className=\"App\">\n        <Header handleRegister={this.handleRegister} signIn={this.signIn} handleLoginUsername={this.handleLoginUsername} loginUsername={this.state.loginUsername} loginToggled={this.state.loginToggled} authenticated={this.state.authenticated} toggleLoginForm={this.toggleLoginForm} snippetForm={this.state.snippetForm} handleChange={this.handleChange} handleSubmit={this.handleSubmit} />\n        <Row>\n          <Col s={10} offset={'s1'}>\n          {this.state.authenticated && <SnippetContainer snippets={this.state.snippets}/> }\n        </Col>\n      </Row>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}